<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE-edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>AIBIG | Universiti Malaysia Kelantan</title>
    <link href="/images/indexItems/umkicon.png" rel="shortcut icon" />

    <div th:replace="~{fragments/plugin_file :: plugin_file}"></div>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/buletin.css" />
    <script src="/js/vendor/turn.js"></script>
</head>

<body>
    <div th:replace="~{fragments/Navbar :: navbar}"></div>
    <main id="main">
        <div th:replace="~{fragments/Breadcrumbs :: breadcrumbs}"></div>
        <div class="containers">
            <section class="blog-page-section spad pt-0">
                <div class="container">
                    <div class="row justify-content-center" data-aos="fade-up" data-aos-offset="300" data-aos-easing="ease-in-sine">
                        <div class="col-xl-12 col-md-12" th:object="${buletinFile}">
                            <div class="section-title text-center position-relative pb-3 mb-5 mx-auto">
                                <h2 th:text="*{buletinTitle}"></h2>
                                <div type="hidden" class="allPages" th:data-page="*{buletinPage}"></div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 text-center mb-5">
                                    <a th:href="@{/admin/displayPDF(pdfID=*{buletinFileId})}" target="_blank" class="btn btn-primary">Display PDF</a>
                                </div>
                            </div>
                            <div id="flipbook">
                                <div th:each="allimage : ${images}" class="flipbook-container">
                                    <div class="gradient"></div>
                                    <img th:src="@{/admin/displayImagePDF(imageId=${allimage.buletinImageId})}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    <div th:replace="~{fragments/Footer :: footer}"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
</body>
<script>
    $(document).ready(function() {
        $('#flipbook').turn({
            height: 807,
            acceleration: false,
            display: 'double',
            disable: true,
            duration: 1000,
            gradients: true,
            autoCenter: true,
            elevation: 50
        });
    });

    $(document).bind('keydown', function(e) {

        if (e.keyCode == 37)
            $('#flipbook').turn('previous');
        else if (e.keyCode == 39)
            $('#flipbook').turn('next');
    });

    $(document).ready(function() {
        var page = $('.allPages').data('page');
        console.log(page);
        for (var i = 0; i < page; i++) {
            // Select all div.turn-page-wrapper elements
            $('.turn-page-wrapper').each(function() {
                // Get the page number attribute
                var pageNumber = parseInt($(this).attr('page'));

                // Find the div.gradient within the current turn-page-wrapper
                var gradientDiv = $(this).find('.gradient');
                var image = $(this).find('img');

                // Check if the page number is odd or even
                if (pageNumber === 1) {
                    gradientDiv.addClass('first-page');
                    image.addClass('first-image');
                } else if (pageNumber % 2 === 0) {
                    // If even, add a class to div.gradient
                    gradientDiv.addClass('even-gradient');
                    image.addClass('even-image');

                } else {
                    // If odd, add a different class to div.gradient
                    gradientDiv.addClass('odd-gradient');
                    image.addClass('odd-image');
                }
            });
        }

    });
</script>

</html>